(this.webpackJsonpklipping=this.webpackJsonpklipping||[]).push([[0],{41:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),i=n.n(r),a=n(14),c=n.n(a),o=(n(41),n(7)),s=n(11),u=n(4),d=n(3),l=n(9),b=Object(l.c)({name:"mainMenuState",initialState:{value:"Cutting"},reducers:{setState:function(e,t){e.value=t.payload}}}),f=b.actions.setState,p=function(e){return e.mainMenuState.value},j=b.reducer,m=n(1),O=function(e){var t=e.iconName,n=e.stateName,r=Object(d.b)(),i=Object(d.c)(p),a=Object(o.a)(Object(o.a)({color:"snow",borderRadius:"25px",cursor:"pointer",transitionDuration:"0.3s",transitionProperty:"transform"},i===n&&{stroke:"black",strokeWidth:"10"}),{},{"&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"},display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"});return Object(m.b)("div",{css:a,title:n},Object(m.b)(s.a,{icon:t,size:"7x",onClick:function(){r(f(n))}}),n)},g=function(){return Object(m.b)("div",{style:{backgroundColor:"rgba(56, 142, 214, 1)",borderRadius:"25px",width:"200px",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px",gap:"20px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},title:"MainMenu"},Object(m.b)(O,{iconName:u.d,stateName:"Cutting"}),Object(m.b)(O,{iconName:u.e,stateName:"Metadata"}),Object(m.b)(O,{iconName:u.g,stateName:"Thumbnail"}),Object(m.b)(O,{iconName:u.b,stateName:"Start Workflow"}))},v=n(12),x=n(19),y=Object(l.c)({name:"videoState",initialState:{isPlaying:!1,currentlyAt:0,duration:0,segments:[{id:Object(l.d)(),startTime:0,endTime:64.733,state:"alive"}]},reducers:{setIsPlaying:function(e,t){e.isPlaying=t.payload},setCurrentlyAt:function(e,t){console.log("Action.payload: "+t.payload),e.currentlyAt=t.payload},setDuration:function(e,t){e.duration=t.payload},addSegment:function(e,t){e.segments.push(t.payload)},cut:function(e){var t=e.segments.findIndex((function(t){return t.startTime<=e.currentlyAt&&t.endTime>=e.currentlyAt}));if(e.segments[t].startTime===e.currentlyAt||e.segments[t].endTime===e.currentlyAt)return e;var n={id:Object(l.d)(),startTime:e.segments[t].startTime,endTime:e.currentlyAt,state:"dead"},r={id:Object(l.d)(),startTime:e.currentlyAt,endTime:e.segments[t].endTime,state:"dead"};e.segments.splice(t,1,n,r)}}}),h=y.actions,w=h.setIsPlaying,C=h.setCurrentlyAt,S=h.setDuration,k=(h.addSegment,h.cut),T=function(e){return e.videoState.isPlaying},R=function(e){return e.videoState.currentlyAt},N=function(e){return e.videoState.segments},D=y.reducer,I=n(15),A=n.n(I),L=n(18),P=n(35);function U(e){return M.apply(this,arguments)}function M(){return(M=Object(L.a)(A.a.mark((function e(t){var n,r,i,a,c,s,u,d,l,b=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>1&&void 0!==b[1]?b[1]:{},r=n.body,i=Object(P.a)(n,["body"]),a={"Content-Type":"application/json"},c=btoa(unescape(encodeURIComponent("admin:opencast"))),s={Authorization:"Basic ".concat(c)},u=Object(o.a)(Object(o.a)({method:r?"POST":"GET"},i),{},{headers:Object(o.a)(Object(o.a)(Object(o.a)({},a),i.headers),s)}),r&&(u.body=JSON.stringify(r)),e.prev=6,e.next=9,window.fetch(t,u);case 9:return l=e.sent,e.next=12,l.json();case 12:if(d=e.sent,!l.ok){e.next=15;break}return e.abrupt("return",d);case 15:throw new Error(l.statusText);case 18:return e.prev=18,e.t0=e.catch(6),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:d));case 21:case"end":return e.stop()}}),e,null,[[6,18]])})))).apply(this,arguments)}U.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U(e,Object(o.a)(Object(o.a)({},t),{},{method:"GET"}))},U.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return U(e,Object(o.a)(Object(o.a)({},n),{},{body:t}))};var E=Object(l.b)("videoURL/fetchVideoURL",Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("https://legacy.opencast.org/admin-ng/tools/ID-dual-stream-demo/editor.json");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),z=Object(l.c)({name:"videoURL",initialState:{videoURLs:[],videoCount:0,duration:0,status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(E.pending,(function(e,t){e.status="loading"})),e.addCase(E.fulfilled,(function(e,t){e.status="success",e.videoURLs=t.payload.previews.reduce((function(e,t){return e.push(t.uri),e}),[]),e.videoCount=t.payload.previews.length,e.duration=t.payload.duration/1e3})),e.addCase(E.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),F=function(e){return e.videoURL.videoURLs},V=function(e){return e.videoURL.videoCount},W=function(e){return e.videoURL.duration},B=z.reducer,J=n(32),G=n.n(J),H=function(e){var t=e.url,n=e.isMuted,i=Object(d.b)(),a=Object(d.c)(T),c=Object(d.c)(R),o=Object(d.c)(W),s=Object(r.useState)(!1),u=Object(x.a)(s,2),l=u[0],b=u[1],f=Object(r.useRef)(null);return Object(r.useEffect)((function(){!a&&f.current&&l&&(console.log("useEffect seekTO CurrentlyAt: "+c),f.current.seekTo(c,"seconds"))})),Object(m.b)(G.a,{url:t,ref:f,playing:a,muted:n,onProgress:function(e){i(C(e.playedSeconds))},progressInterval:100,onDuration:function(e){i(S(e))},onReady:function(){b(!0)},onEnded:function(){i(w(!1)),i(C(o))}})},q=function(){var e=Object(d.b)(),t=Object(d.c)(T),n=Object(d.c)(R),r={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",padding:"10px"};return Object(m.b)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",padding:"10px"},title:"Video Controls"},Object(m.b)("div",{css:r,title:"Video Controls Top Row"},Object(m.b)(s.a,{css:{cursor:"pointer",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}},icon:t?u.f:u.h,size:"5x",onClick:function(){return e(w(!t))}})),Object(m.b)("div",{css:r,title:"Video Controls Bottom Row"},Object(m.b)("div",null,new Date(1e3*(n||0)).toISOString().substr(11,12))))},Y=function(){var e,t=Object(d.b)(),n=Object(d.c)(F),i=Object(d.c)(V),a=Object(d.c)((function(e){return e.videoURL.status})),c=Object(d.c)((function(e){return e.videoURL.error}));Object(r.useEffect)((function(){"idle"===a&&t(E())}),[a,t]),"loading"===a?e=Object(m.b)("div",{className:"loader"},"Loading..."):"success"===a?e=Object(m.b)("div",{className:"loader"},"Success..."):"failed"===a&&(e=Object(m.b)("div",null,c));for(var o=[],s=0;s<i;s++)o.push(Object(m.b)(H,{key:s,url:n[s],isMuted:0===s}));return Object(m.b)("div",{css:{backgroundColor:"wheat",borderRadius:"25px",display:"flex",width:"auto",flex:"7",flexDirection:"column",alignItems:"center",padding:"10px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},title:"Video Area"},e,Object(m.b)("div",{css:{backgroundColor:"black",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},title:"Video Player Area"},o),Object(m.b)(q,null))},_=n(33),K=n.n(_),Q=n(34),X=n.p+"static/media/placeholder_waveform.2d2206f8.png";var Z={name:"blfv16",styles:"background-color:rgba(255, 255, 255, 1);border-radius:10px;height:50px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);cursor:pointer;transition-duration:0.3s;transition-property:transform;&:hover{transform:scale(1.1);}&:active{transform:scale(0.9);}"},$={name:"2q5poe",styles:"transform:scaleY(1.5) rotate(90deg);padding:5px;"},ee=function(e){var t=e.timelineWidth,n=Object(d.b)(),i=Object(d.c)(T),a=Object(d.c)(R),c=Object(d.c)(W),o=Object(r.useState)({x:0,y:0}),l=Object(x.a)(o,2),b=l[0],f=l[1],p=Object(r.useRef)(0);Object(r.useEffect)((function(){a!==p.current&&(j(),p.current=a)}));var j=function(){var e=b.y;f({x:a/c*t,y:e})},O=Object(m.a)({backgroundColor:"rgba(255, 0, 0, 1)",height:"250px",width:"1px",position:"absolute",zIndex:1,boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center"},""),g=Z,v=$;return Object(m.b)(K.a,{onStop:function(e,r){var i=r.x,a=r.y;f({x:i,y:a}),n(C(i/t*c))},axis:"x",bounds:"parent",position:b,disabled:i},Object(m.b)("div",{css:O,title:"Scrubber"},Object(m.b)("div",{css:g,title:"dragHandle"},Object(m.b)(s.a,{css:v,icon:u.a,size:"1x"}))))},te=function(e){e.timelineWidth;var t=Object(d.c)(N),n=Object(d.c)(W),r=Object(m.a)({display:"flex",flexDirection:"row"},"");return Object(m.b)("div",{css:r,title:"Segments"},t.map((function(e){return Object(m.b)("div",{key:e.id,title:"Segment",css:Object(v.a)({backgroundColor:"alive"===e.state?"blue":"pink",borderRadius:"25px",width:(e.endTime-e.startTime)/n*100+"%",height:"250px",opacity:"0.4"},"")})})))},ne=function(){var e=Object(Q.a)(),t=e.ref,n=e.width,r=void 0===n?1:n,i=Object(m.a)({position:"relative",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 0.85)",height:"250px",width:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},"");return Object(m.b)("div",{ref:t,css:i,title:"Timeline"},Object(m.b)("img",{alt:"waveform2",src:X,style:{position:"absolute",height:"250px",width:"100%"}}),Object(m.b)(ee,{timelineWidth:r}),Object(m.b)(te,{timelineWidth:r}))};var re={name:"nt93hi",styles:"background-color:rgba(36, 66, 92, 1);;border-radius:25px;flex:3;display:grid;grid-template-columns:auto auto auto;padding:10px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);"},ie=function(e){var t=e.iconName,n=e.actionName,r=e.action,i=Object(d.b)();return Object(m.b)("div",{css:{color:"snow",borderRadius:"25px",cursor:"pointer",justifyContent:"center",alignContent:"center",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"},display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},title:n,onClick:function(){return i(r())}},Object(m.b)(s.a,{icon:t,size:"5x"}),n)},ae=function(){var e=re;return Object(m.b)("div",{css:e,title:"CuttingActions"},Object(m.b)(ie,{iconName:u.b,actionName:"Cut",action:k}),Object(m.b)(ie,{iconName:u.c,actionName:"Mark as Hidden",action:k}),Object(m.b)(ie,{iconName:u.j,actionName:"Mark as Deleted",action:k}),Object(m.b)(ie,{iconName:u.b,actionName:"Cut",action:k}))},ce=function(){var e=Object(d.c)(p);return Object(m.b)("div",{css:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"20px"},title:"MainMenuContext"},function(e){switch(e){case"Cutting":return Object(m.b)(i.a.Fragment,null,Object(m.b)("div",{css:Object(v.a)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",gap:"20px"},"")},Object(m.b)(Y,null),Object(m.b)(ae,null)),Object(m.b)(ne,null));default:return Object(m.b)(i.a.Fragment,null,Object(m.b)(s.a,{icon:u.i,size:"10x"}),"Under Construction")}}(e))},oe=function(){return Object(m.b)("div",{css:{display:"flex",flex:"1",flexDirection:"row",padding:"10px",gap:"50px"},title:"Body"},Object(m.b)(ce,null),Object(m.b)(g,null))};var se=function(){return Object(m.b)("div",{className:"App"},Object(m.b)(oe,null))},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))},de=Object(l.a)({reducer:{mainMenuState:j,videoState:D,videoURL:B}});c.a.render(Object(m.b)(i.a.StrictMode,null,Object(m.b)(d.a,{store:de},Object(m.b)(se,null))),document.getElementById("root")),ue()}},[[72,1,2]]]);
//# sourceMappingURL=main.55598bc6.chunk.js.map